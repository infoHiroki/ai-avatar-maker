# 声のクローニング実装ガイド（必須要件）

**前提**: 自分の声を使うことが必須、APIベース

---

## 🎯 結論：推奨構成

```yaml
最適解: ElevenLabs + D-ID

構成:
  テキスト
    ↓
  ElevenLabs API (あなたの声でTTS)
    ↓
  音声ファイル (.mp3)
    ↓
  D-ID API (リップシンク)
    ↓
  完成動画

月額コスト:
  ElevenLabs Creator: $22/月 (30k文字 ≈ 月15本)
  D-ID Pro: $49/月 (15分 ≈ 週2本×5分)

  合計: $71/月 (¥10,000)

品質:
  音声: ⭐⭐⭐⭐⭐（業界最高、自分の声）
  リップシンク: ⭐⭐⭐⭐⭐
  総合: ⭐⭐⭐⭐⭐
```

---

## 🎤 声のクローニング対応サービス比較

### ElevenLabs（推奨）

```yaml
音声クローニング:
  必要サンプル: 1-2分の録音
  対応言語: 日本語完全対応
  品質: 業界最高レベル
  感情表現: 可能

プラン:
  Creator: $22/月
    - 30,000文字/月
    - 10個の音声クローン
    - 月15本の動画（1本2000文字想定）

  Pro: $99/月
    - 100,000文字/月
    - 30個の音声クローン
    - 月50本の動画

  Scale: $330/月
    - 500,000文字/月

日本語品質:
  ✅ 極めて自然
  ✅ イントネーション正確
  ✅ 感情表現が豊か
  ✅ 発音が明瞭

API:
  ✅ 使いやすい
  ✅ レスポンス速い（数秒）
  ✅ ドキュメント充実
```

### Play.ht

```yaml
音声クローニング:
  必要サンプル: 30秒-2分
  対応言語: 日本語対応
  品質: 高品質

プラン:
  Creator: $31/月
    - 30,000文字/月

  Pro: $79/月
    - 300,000文字/月

日本語品質:
  ✅ 自然
  ⚠️ ElevenLabsよりやや劣る

API:
  ✅ 利用可能
```

### Resemble.ai

```yaml
音声クローニング:
  必要サンプル: 3-5分
  対応言語: 日本語対応
  品質: 高品質

プラン:
  Basic: $29/月
    - 100,000文字/月

日本語品質:
  ✅ 良好
  ⚠️ サンプルが長めに必要

API:
  ✅ 利用可能
```

---

## 📊 詳細比較

| 項目 | ElevenLabs | Play.ht | Resemble.ai |
|------|-----------|---------|-------------|
| **月額（最安）** | $22 | $31 | $29 |
| **日本語品質** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **必要サンプル** | 1-2分 | 30秒-2分 | 3-5分 |
| **感情表現** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| **API品質** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **処理速度** | 速い | 中 | 中 |

**結論**: ElevenLabs が最適

---

## 🔧 ElevenLabs 実装ガイド

### ステップ1: 音声クローン作成

#### 1-1. 音声サンプル録音

```yaml
要件:
  時間: 1-2分（長いほど高品質）
  内容: 様々な音素を含む文章
  品質:
    - 静かな環境
    - クリアな発音
    - 一定の音量
    - ノイズなし

推奨録音スクリプト:
  「おはようございます。今日は晴れていますね。
   このテキストは、音声クローニングのためのサンプルです。
   できるだけ自然に、いつも通りの話し方で読んでください。

   AIアバター技術は、近年急速に発展しています。
   特に音声合成とリップシンクの品質が向上しました。

   私たちは、この技術を活用して、
   より良いコンテンツを作成できます。

   数字も読んでみましょう。
   1、2、3、4、5、6、7、8、9、10。
   100、1000、10000。

   疑問文も重要です。
   これは本当ですか？
   どう思いますか？
   いつ始めますか？

   感情を込めた文章も含めます。
   素晴らしい！これは驚きです。
   残念ですが、それは難しいかもしれません。
   ありがとうございます。よろしくお願いします。」

録音方法:
  - スマホの録音アプリ
  - PCのマイク
  - 専用マイク（推奨）

ファイル形式:
  - WAV or MP3
  - サンプルレート: 44.1kHz以上
  - ビットレート: 128kbps以上
```

#### 1-2. ElevenLabsアカウント作成

```bash
1. https://elevenlabs.io にアクセス
2. "Get Started Free" をクリック
3. Googleアカウントまたはメールで登録
4. プラン選択: Creator ($22/月) 推奨
```

#### 1-3. 音声クローン作成

```bash
1. ログイン後、"Voices" → "Add Voice" をクリック

2. "Instant Voice Cloning" を選択

3. 録音ファイルをアップロード

4. Voice name: "自分の声" 等

5. Description: "本人の声のクローン"

6. "Add Voice" をクリック

7. 処理完了（数分）

8. テスト:
   - サンプルテキストを入力
   - "Generate" をクリック
   - 音声を確認
```

---

### ステップ2: API統合

#### 2-1. APIキー取得

```bash
1. ElevenLabsダッシュボード

2. "Profile" → "API Keys"

3. "Create API Key"

4. キーをコピー
```

#### 2-2. Python実装

```python
import requests
import json

# ElevenLabs API設定
ELEVENLABS_API_KEY = "your_api_key_here"
VOICE_ID = "your_voice_id_here"  # クローンした声のID

def generate_audio_elevenlabs(text, output_path):
    """
    ElevenLabsで音声生成（自分の声）

    Args:
        text: 読み上げテキスト
        output_path: 出力ファイルパス
    """
    url = f"https://api.elevenlabs.io/v1/text-to-speech/{VOICE_ID}"

    headers = {
        "Accept": "audio/mpeg",
        "Content-Type": "application/json",
        "xi-api-key": ELEVENLABS_API_KEY
    }

    data = {
        "text": text,
        "model_id": "eleven_multilingual_v2",  # 日本語対応
        "voice_settings": {
            "stability": 0.5,        # 0-1: 安定性
            "similarity_boost": 0.75,  # 0-1: 声の類似度
            "style": 0.0,             # 0-1: スタイルの強さ
            "use_speaker_boost": True  # 話者ブースト
        }
    }

    response = requests.post(url, json=data, headers=headers)

    if response.status_code == 200:
        with open(output_path, 'wb') as f:
            f.write(response.content)
        print(f"✅ 音声生成完了: {output_path}")
        return output_path
    else:
        raise Exception(f"音声生成エラー: {response.status_code}")

# 使用例
text = """
こんにちは。今日はAIアバターを使った動画制作について解説します。
この技術を使えば、誰でも簡単にプロ品質の動画が作れます。
"""

audio_file = generate_audio_elevenlabs(text, "my_voice.mp3")
```

---

### ステップ3: D-IDと統合

```python
import requests
import time

D_ID_API_KEY = "your_d_id_api_key"

def upload_audio_to_cloudinary(audio_path):
    """
    音声ファイルをCloudinaryにアップロード
    （D-IDが音声URLを要求するため）
    """
    # Cloudinary設定
    import cloudinary
    import cloudinary.uploader

    cloudinary.config(
        cloud_name="your_cloud_name",
        api_key="your_api_key",
        api_secret="your_api_secret"
    )

    result = cloudinary.uploader.upload(
        audio_path,
        resource_type="video"  # audioでも可
    )

    return result['secure_url']

def generate_video_did(audio_url, avatar_image_url):
    """
    D-IDで動画生成

    Args:
        audio_url: 音声ファイルのURL
        avatar_image_url: アバター画像のURL
    """
    headers = {
        "Authorization": f"Basic {D_ID_API_KEY}",
        "Content-Type": "application/json"
    }

    payload = {
        "source_url": avatar_image_url,
        "script": {
            "type": "audio",
            "audio_url": audio_url
        },
        "config": {
            "result_format": "mp4"
        }
    }

    # 動画生成開始
    response = requests.post(
        "https://api.d-id.com/talks",
        headers=headers,
        json=payload
    )

    talk_id = response.json()["id"]
    print(f"動画生成開始: {talk_id}")

    # 完了待ち
    while True:
        status_response = requests.get(
            f"https://api.d-id.com/talks/{talk_id}",
            headers=headers
        )

        status_data = status_response.json()
        status = status_data["status"]

        if status == "done":
            video_url = status_data["result_url"]
            print(f"✅ 動画生成完了: {video_url}")
            return video_url
        elif status == "error":
            raise Exception("動画生成エラー")

        print(f"処理中... {status}")
        time.sleep(10)

# 完全な統合ワークフロー
def create_video_with_my_voice(text, avatar_image_url):
    """
    自分の声でAIアバター動画を作成

    Args:
        text: スクリプト
        avatar_image_url: アバター画像URL

    Returns:
        完成動画のURL
    """
    # ステップ1: ElevenLabsで音声生成
    print("🎤 音声生成中...")
    audio_path = generate_audio_elevenlabs(text, "temp_audio.mp3")

    # ステップ2: 音声をアップロード
    print("☁️ 音声アップロード中...")
    audio_url = upload_audio_to_cloudinary(audio_path)

    # ステップ3: D-IDで動画生成
    print("🎬 動画生成中...")
    video_url = generate_video_did(audio_url, avatar_image_url)

    return video_url

# 使用例
if __name__ == "__main__":
    script = """
    こんにちは！今日はAIアバターの作り方について解説します。
    この方法を使えば、自分の声で動画が作れます。
    ぜひ試してみてください！
    """

    avatar_url = "https://your-avatar-image.jpg"

    final_video = create_video_with_my_voice(script, avatar_url)
    print(f"完成: {final_video}")
```

---

## 💰 コスト詳細

### 週2本（5分動画）の場合

```yaml
計算:
  1本あたり文字数: 2,000文字（5分想定）
  週2本 = 月8本
  月間文字数: 16,000文字

ElevenLabs Creator:
  月額: $22
  含まれる: 30,000文字
  → 16,000文字使用で余裕あり

D-ID Pro:
  月額: $49
  含まれる: 15分
  → 8本×5分 = 40分（追加料金発生）

  追加料金:
    超過分: 25分
    単価: $0.30/分
    追加: 25 × $0.30 = $7.5

合計:
  ElevenLabs: $22
  D-ID: $49 + $7.5 = $56.5

  月額合計: $78.5 (¥11,000)
```

### コスト削減策

#### オプション1: 動画を短くする

```yaml
戦略: 1本を3分に短縮

計算:
  8本×3分 = 24分
  → D-ID Pro (15分) + 追加9分
  追加: 9 × $0.30 = $2.7

月額:
  ElevenLabs: $22
  D-ID: $49 + $2.7 = $51.7

  合計: $73.7 (¥10,500)
```

#### オプション2: YouTube Shorts中心

```yaml
戦略: 60秒ショート動画

計算:
  週2本×60秒 = 月8分
  → D-ID Lite ($5.9) で足りる！

月額:
  ElevenLabs: $22
  D-ID Lite: $5.9

  合計: $27.9 (¥4,000)
```

---

## 🎯 推奨実装プラン

### Week 1: セットアップ

```bash
Day 1-2: 音声クローン作成
  - 録音スクリプト準備
  - 静かな環境で録音
  - ElevenLabsにアップロード
  - 音声クローン生成

Day 3-4: テスト
  - サンプルテキストで音声生成
  - 品質確認
  - 必要なら録音し直し

Day 5-7: 統合
  - D-IDアカウント作成
  - アバター画像準備
  - 最初の動画生成
  - 品質確認
```

### Week 2: 本格運用

```bash
- ブログ記事から動画制作開始
- ワークフロー確立
- 視聴者反応確認
```

---

## 📋 チェックリスト

### 準備

- [ ] ElevenLabsアカウント作成（Creator $22/月）
- [ ] 録音環境の確保
- [ ] 録音スクリプト準備
- [ ] 音声サンプル録音（1-2分）
- [ ] 音声クローン作成
- [ ] 音声テスト・品質確認

### 統合

- [ ] D-IDアカウント作成
- [ ] D-IDプラン選択（Pro $49推奨）
- [ ] Cloudinaryアカウント作成（無料）
- [ ] アバター画像準備
- [ ] APIキー取得（ElevenLabs, D-ID, Cloudinary）

### テスト

- [ ] Python環境セットアップ
- [ ] テストスクリプト実装
- [ ] 音声生成テスト
- [ ] 動画生成テスト
- [ ] 品質確認

---

## ⚠️ 重要な注意点

### 音声録音の品質

```
高品質な音声クローンを作るために:

✅ DO:
  - 静かな環境で録音
  - 一定の音量で話す
  - 明瞭に発音
  - 自然なペースで
  - 1-2分以上録音

❌ DON'T:
  - 早口すぎる
  - 小声すぎる
  - 背景ノイズがある
  - エコーがある
  - 圧縮音声を使う
```

### ElevenLabs使用制限

```
Creator プラン:
  - 30,000文字/月
  - 超過すると追加料金

対策:
  - 動画の長さを管理
  - 文字数カウント
  - 必要ならProプランへ
```

---

## まとめ

### ✅ 確定構成

```yaml
音声: ElevenLabs (自分の声クローン)
リップシンク: D-ID
月額: $70-80 (¥10,000-11,000)

品質: 業界最高レベル
実装難易度: ⭐⭐⭐☆☆（中級）
```

### 次のステップ

1. **ElevenLabsアカウント作成**
2. **音声サンプル録音**
3. **音声クローン作成**
4. **D-IDセットアップ**
5. **テスト動画1本作成**

準備はいいですか？🎤
